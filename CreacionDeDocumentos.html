<!DOCTYPE html>
<html class="light" lang="es">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>VozDoc - Editor de Documentos por Voz</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#005A9C",
            "background-light": "#f6f7f8",
            "background-dark": "#101922",
            "primary-accent": "#50E3C2",
            "text-light": "#333333",
            "text-dark": "#E0E0E0",
            "surface-light": "#FFFFFF",
            "surface-dark": "#1A2836",
            "border-light": "#E0E0E0",
            "border-dark": "#2C3A47"
          },
          fontFamily: {
            "display": ["Inter", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.25rem",
            "lg": "0.5rem",
            "xl": "0.75rem",
            "full": "9999px"
          }
        }
      }
    }
  </script>
  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    [contenteditable="true"]:empty:before {
      content: attr(placeholder);
      pointer-events: none;
      display: block;
      color: #6b7280;
      font-style: italic;
      font-size: 1.1rem;
    }

    #editor-wrapper {
      position: relative;
      transition: border-color 0.25s ease, box-shadow 0.4s ease, background-color 0.25s ease;
    }

    #editor-wrapper.listening-active {
      border-color: rgba(236, 72, 153, 0.45);
      box-shadow: 0 0 0 6px rgba(236, 72, 153, 0.18), 0 0 32px rgba(236, 72, 153, 0.28);
      animation: dictationAura 1.6s ease-in-out infinite;
    }

    @keyframes dictationAura {
      0% {
        box-shadow: 0 0 0 6px rgba(236, 72, 153, 0.18), 0 0 28px rgba(236, 72, 153, 0.22);
      }

      50% {
        box-shadow: 0 0 0 16px rgba(236, 72, 153, 0.14), 0 0 44px rgba(236, 72, 153, 0.32);
      }

      100% {
        box-shadow: 0 0 0 6px rgba(236, 72, 153, 0.18), 0 0 28px rgba(236, 72, 153, 0.22);
      }
    }

    .voice-chip {
      transition: transform 0.25s ease, box-shadow 0.35s ease, border-color 0.25s ease;
    }

    .voice-chip:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.12);
    }

    #voice-sidebar {
      position: relative;
    }

    @media (min-width: 1024px) {
      #voice-sidebar {
        min-width: 320px;
      }
    }
  </style>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
    crossorigin="anonymous"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
    crossorigin="anonymous"></script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
  <div class="flex min-h-screen w-full flex-col bg-background-light dark:bg-background-dark">
    <header
      class="flex w-full items-center justify-between border-b border-border-light bg-background-light px-8 py-6 dark:border-border-dark dark:bg-background-dark">
      <div class="flex items-center gap-3">
        <svg class="h-10 w-10 text-primary" fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <path clip-rule="evenodd"
            d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z"
            fill-rule="evenodd"></path>
        </svg>
        <div>
          <h1 class="text-xl font-bold text-gray-900 dark:text-gray-100">VozDoc</h1>
          <p class="text-sm text-gray-600 dark:text-gray-400">Editor de documentos guiado por voz</p>
        </div>
      </div>
      <div id="save-status" class="text-sm font-medium text-gray-500 dark:text-gray-300"></div>
    </header>
    <div class="flex w-full flex-1 flex-col gap-8 px-6 py-8 lg:flex-row lg:items-start lg:gap-10 lg:px-10">
      <main class="flex flex-1 flex-col">
        <section class="flex-1 overflow-y-auto">
          <div class="mx-auto flex w-full max-w-3xl flex-col gap-8">
            <div
              class="rounded-3xl border border-border-light bg-surface-light p-8 shadow-sm dark:border-border-dark dark:bg-surface-dark">
              <div class="space-y-6">
                <div>
                  <label class="sr-only" for="doc-title">Título del documento</label>
                  <input id="doc-title" aria-label="Título del documento"
                    class="w-full border-none bg-transparent p-0 text-3xl font-bold leading-tight tracking-tight text-gray-900 placeholder:text-gray-500 focus:outline-none focus:ring-0 dark:text-gray-100 dark:placeholder:text-gray-400"
                    placeholder="Documento sin título" value="" />
                </div>
                <div id="editor-wrapper"
                  class="rounded-2xl border-2 border-transparent bg-white p-6 transition-all duration-300 ease-in-out dark:bg-surface-dark">
                  <div id="doc-editor" contenteditable="true" role="textbox" aria-multiline="true"
                    placeholder="Di 'Comenzar redacción' para iniciar el dictado."
                    class="min-h-[360px] text-base leading-relaxed text-text-light focus:outline-none dark:text-text-dark">
                  </div>
                </div>
              </div>
            </div>
            <div
              class="rounded-2xl border border-dashed border-primary/40 bg-primary/5 p-6 text-sm text-primary dark:border-primary/40 dark:bg-primary/10">
              <h2 class="text-base font-semibold tracking-tight text-primary">¿Cómo funciona?</h2>
              <p class="mt-2 text-primary/80">
                El panel de la derecha te muestra los comandos disponibles según tu contexto. Solo necesitas decirlos en
                voz alta para que VozDoc ejecute la acción por ti.
              </p>
            </div>
          </div>
        </section>
      </main>
      <aside id="voice-sidebar"
        class="flex w-full flex-col border-t border-border-light bg-white/80 backdrop-blur dark:border-border-dark dark:bg-surface-dark/90 lg:w-[360px] lg:border-l lg:border-t-0">
        <div class="sticky top-4 flex max-h-screen flex-col gap-8 px-6 py-8">
          <div class="flex flex-col items-center gap-4 text-center">
            <div class="relative">
              <button id="dictation-toggle" aria-label="Activar dictado"
                class="flex h-24 w-24 items-center justify-center rounded-full bg-slate-200 text-primary shadow-sm transition-colors duration-200 ease-out focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-primary/40">
                <span class="material-symbols-outlined text-5xl">mic</span>
              </button>
              <span id="sidebar-status-badge"
                class="absolute -bottom-4 left-1/2 -translate-x-1/2 rounded-full border border-border-light bg-white px-3 py-1 text-xs font-semibold uppercase tracking-wide text-gray-600 shadow-sm dark:border-border-dark dark:bg-surface-dark dark:text-gray-300">Inactivo</span>
            </div>
            <div class="flex flex-col gap-1">
              <p id="dictation-status-text" class="text-base font-semibold text-gray-900 dark:text-gray-100">No estoy
                escuchando</p>
              <p id="dictation-help-text" class="text-sm text-gray-600 dark:text-gray-400">Di "Comenzar redacción"</p>
            </div>
          </div>

          <div id="sidebar-state-inactive" class="space-y-6">
            <section class="space-y-3">
              <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Acciones
                principales</h2>
              <div class="space-y-3">
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/70 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Comenzar redacción"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Inicia el dictado y activa el micrófono.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/70 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Abrir documento"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Recupera un archivo reciente usando tu voz.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/70 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Guardar documento"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Guarda tu progreso de manera segura.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/70 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Exportar documento"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Prepara una copia en Word o PDF.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/70 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Imprimir documento"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Envía el documento a la impresora predeterminada.
                  </p>
                </div>
              </div>
            </section>
          </div>

          <div id="sidebar-state-dictating" class="hidden space-y-6">
            <section class="space-y-3">
              <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Puntuación y
                formato</h2>
              <div class="space-y-3">
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Agrega coma"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Inserta una coma justo donde estás dictando.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Agrega punto"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Cierra la oración actual.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Nuevo párrafo"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Salta dos líneas para comenzar una idea nueva.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Negrita"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Destaca las palabras siguientes.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Subrayado"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Subraya la frase más reciente.</p>
                </div>
              </div>
            </section>

            <section class="space-y-3">
              <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Corrección
              </h2>
              <div class="space-y-3">
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Deshacer"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Revierte la última acción realizada.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Borrar última palabra"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Elimina solo la palabra más reciente.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Borrar oración"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Quita la última oración completa.</p>
                </div>
                <div data-command-chip
                  class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5">
                  <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Borrar último párrafo"</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Retira el bloque anterior por completo.</p>
                </div>
              </div>
            </section>

            <section class="space-y-3">
              <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Acciones
                secundarias</h2>
              <div
                class="voice-chip rounded-2xl border border-border-light/70 bg-white/80 p-4 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/5"
                data-command-chip>
                <h3 class="font-semibold text-gray-900 dark:text-gray-100">"Terminar redacción"</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400">Cierra el dictado y vuelve al modo comandos.</p>
              </div>
            </section>
          </div>

          <div id="sidebar-export-options"
            class="hidden space-y-3 rounded-2xl border border-border-light/70 bg-white/90 p-4 shadow-sm dark:border-border-dark/70 dark:bg-white/5">
            <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Exportar
              documento</h2>
            <p class="text-sm text-gray-600 dark:text-gray-400">Di "Exportar en Word" o "Exportar en PDF" para elegir el
              formato.</p>
            <div class="space-y-2">
              <div data-command-chip
                class="voice-chip rounded-xl border border-primary/40 bg-primary/10 p-3 text-left text-primary">
                <div class="flex items-center justify-between">
                  <span class="font-semibold">"Exportar en Word"</span>
                  <span class="material-symbols-outlined text-base">description</span>
                </div>
                <p class="mt-1 text-xs text-primary/80">Genera un archivo .doc listo para editar.</p>
              </div>
              <div data-command-chip
                class="voice-chip rounded-xl border border-primary/40 bg-primary/10 p-3 text-left text-primary">
                <div class="flex items-center justify-between">
                  <span class="font-semibold">"Exportar en PDF"</span>
                  <span class="material-symbols-outlined text-base">picture_as_pdf</span>
                </div>
                <p class="mt-1 text-xs text-primary/80">Crea un PDF final listo para compartir.</p>
              </div>
              <div data-command-chip
                class="voice-chip rounded-xl border border-border-light/60 bg-white/80 p-3 text-left shadow-sm dark:border-border-dark/70 dark:bg-white/10">
                <span class="font-semibold text-gray-900 dark:text-gray-100">"Cancelar exportación"</span>
                <p class="text-xs text-gray-600 dark:text-gray-400">Cierra esta opción sin descargar nada.</p>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>
  <script type="module" src="assets/js/pages/documentEditorPage.js"></script>
</body>

</html>